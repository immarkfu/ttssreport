# TTSS Report - çŸ¥è¡Œé‡åŒ–äº¤æ˜“ç³»ç»Ÿ

åŸºäºDæˆ˜æ³•çš„Aè‚¡é‡åŒ–äº¤æ˜“ç³»ç»Ÿï¼Œé›†æˆTushareæ•°æ®ã€é…ç½®æ ‡ç­¾ç®¡ç†å’Œæ™ºèƒ½è‚¡ç¥¨ç­›é€‰åŠŸèƒ½ã€‚

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

TTSS Reportæ˜¯ä¸€ä¸ªå®Œæ•´çš„è‚¡ç¥¨é‡åŒ–äº¤æ˜“ç³»ç»Ÿï¼Œé‡‡ç”¨æ··åˆæ¶æ„ï¼ˆNode.js + Pythonï¼‰ï¼Œæä¾›ä»æ•°æ®é›†æˆã€æ ‡ç­¾è®¡ç®—åˆ°è‚¡ç¥¨ç­›é€‰çš„å…¨æµç¨‹è§£å†³æ–¹æ¡ˆã€‚

### æ ¸å¿ƒåŠŸèƒ½

- **æ•°æ®é›†æˆ**ï¼šæ¯æ—¥è‡ªåŠ¨ä»Tushareè·å–Aè‚¡å¤‡ç”¨è¡Œæƒ…æ•°æ®å’ŒæŠ€æœ¯é¢å› å­æ•°æ®
- **é…ç½®æ ‡ç­¾ç®¡ç†**ï¼šæ”¯æŒå°‘å¦‡æˆ˜æ³•ï¼ˆB1+S1ï¼‰çš„é…ç½®æ ‡ç­¾ç®¡ç†ï¼ŒåŒ…æ‹¬åŠ åˆ†é¡¹å’Œå‡åˆ†é¡¹
- **è‚¡ç¥¨ç­›é€‰**ï¼šåŸºäºé…ç½®æ ‡ç­¾æ™ºèƒ½ç­›é€‰è‚¡ç¥¨ï¼Œæ”¯æŒå¤šæ ‡ç­¾ç»„åˆå’Œæƒé‡æ’åº
- **è§‚å¯Ÿæ± ç®¡ç†**ï¼šä¸ªæ€§åŒ–è‚¡ç¥¨è§‚å¯Ÿæ± ï¼Œæ”¯æŒå¤šç”¨æˆ·æ•°æ®éš”ç¦»
- **æˆ˜æ³•é…ç½®**ï¼šçµæ´»çš„Dæˆ˜æ³•å‚æ•°é…ç½®ï¼Œæ”¯æŒå®æ—¶é¢„è§ˆå’Œå›æµ‹

### æŠ€æœ¯æ ˆ

**å‰ç«¯**:
- React 19 + TypeScript
- Vite (æ„å»ºå·¥å…·)
- TailwindCSS + Shadcn UI
- tRPC + React Query
- Wouter (è·¯ç”±)

**Node.jsåç«¯**:
- Express + tRPC
- Drizzle ORM
- MySQL (ç«å±±äº‘RDS)

**Pythonåç«¯**:
- Tushare (æ•°æ®æº)
- pandas + numpy (æ•°æ®å¤„ç†)
- APScheduler (å®šæ—¶ä»»åŠ¡)
- pymysql (æ•°æ®åº“)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 22.13.0
- Python >= 3.11
- MySQL >= 8.0
- pnpm (æ¨è) æˆ– npm

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/immarkfu/ttssreport.git
cd ttssreport
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
cp .env.example .env
# ç¼–è¾‘.envæ–‡ä»¶ï¼Œå¡«å…¥æ•°æ®åº“å’ŒTushare APIå¯†é’¥ç­‰é…ç½®
```

### 3. å®‰è£…ä¾èµ–

```bash
# å®‰è£…Node.jsä¾èµ–
pnpm install

# å®‰è£…Pythonä¾èµ–
cd python
pip install -r requirements.txt
cd ..
```

### 4. åˆå§‹åŒ–æ•°æ®åº“

```bash
# æ‰§è¡ŒSQLè„šæœ¬åˆ›å»ºæ•°æ®è¡¨
mysql -h <host> -u <user> -p <database> < sql/create_tushare_tables.sql
mysql -h <host> -u <user> -p <database> < sql/create_config_tags_tables.sql
mysql -h <host> -u <user> -p <database> < sql/create_stock_tag_tables.sql

# åˆå§‹åŒ–é…ç½®æ ‡ç­¾æ•°æ®
mysql -h <host> -u <user> -p <database> < sql/init_config_tags_data.sql
```

### 5. å¯åŠ¨æœåŠ¡

**å¼€å‘æ¨¡å¼**:

```bash
# å¯åŠ¨å‰ç«¯å’Œåç«¯å¼€å‘æœåŠ¡å™¨
pnpm dev
```

**ç”Ÿäº§æ¨¡å¼**:

```bash
# ä½¿ç”¨éƒ¨ç½²è„šæœ¬
./scripts/deploy.sh

# æˆ–æ‰‹åŠ¨å¯åŠ¨
pnpm build
pnpm start

# å¯åŠ¨Pythonå®šæ—¶ä»»åŠ¡
python3 python/scheduler/main.py --start
```

### 6. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:3000

## ğŸ“ é¡¹ç›®ç»“æ„

```
ttssreport/
â”œâ”€â”€ client/                   # Reactå‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/           # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard/   # æ€»è§ˆä»ªè¡¨ç›˜
â”‚   â”‚   â”‚   â”œâ”€â”€ ConfigTags/  # é…ç½®æ ‡ç­¾ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ StockFilter/ # è‚¡ç¥¨ç­›é€‰
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ components/      # é€šç”¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ lib/             # å·¥å…·åº“
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ server/                   # Node.jsåç«¯
â”‚   â”œâ”€â”€ routers/             # tRPCè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ configTags.ts   # é…ç½®æ ‡ç­¾API
â”‚   â”‚   â”œâ”€â”€ stockFilter.ts  # è‚¡ç¥¨ç­›é€‰API
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ db.ts                # æ•°æ®åº“è¿æ¥
â”œâ”€â”€ python/                   # Pythonåç«¯
â”‚   â”œâ”€â”€ data_integration/    # Tushareæ•°æ®é›†æˆ
â”‚   â”œâ”€â”€ tag_calculation/     # æ ‡ç­¾è®¡ç®—å¼•æ“
â”‚   â”œâ”€â”€ scheduler/           # å®šæ—¶ä»»åŠ¡
â”‚   â”œâ”€â”€ common/              # å…¬å…±æ¨¡å—
â”‚   â””â”€â”€ scripts/             # è„šæœ¬å·¥å…·
â”œâ”€â”€ drizzle/                  # æ•°æ®åº“Schema
â”œâ”€â”€ sql/                      # SQLè„šæœ¬
â”œâ”€â”€ scripts/                  # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ logs/                     # æ—¥å¿—ç›®å½•
â”œâ”€â”€ docs/                     # æ–‡æ¡£
â”œâ”€â”€ .env                      # ç¯å¢ƒå˜é‡
â””â”€â”€ README.md                 # æœ¬æ–‡ä»¶
```

## ğŸ“– è¯¦ç»†æ–‡æ¡£

- [æ¶æ„è®¾è®¡](docs/architecture.md)
- [APIæ–‡æ¡£](docs/api.md)
- [éƒ¨ç½²æŒ‡å—](docs/deployment.md)
- [å¼€å‘æŒ‡å—](docs/development.md)
- [Pythonæ¨¡å—æ–‡æ¡£](python/README.md)

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°é¡µé¢

1. åœ¨ `client/src/pages/` åˆ›å»ºæ–°ç›®å½•
2. åˆ›å»º `index.tsx` ç»„ä»¶
3. åœ¨ `client/src/App.tsx` æ·»åŠ è·¯ç”±
4. åœ¨ `client/src/components/layout/Sidebar.tsx` æ·»åŠ èœå•é¡¹

### æ·»åŠ æ–°API

1. åœ¨ `server/routers/` åˆ›å»ºæ–°è·¯ç”±æ–‡ä»¶
2. åœ¨ `server/routers.ts` ä¸­å¯¼å…¥å¹¶æ³¨å†Œ
3. åœ¨ `drizzle/` ä¸­å®šä¹‰ç›¸å…³Schemaï¼ˆå¦‚éœ€è¦ï¼‰

### æ·»åŠ æ–°çš„Pythonæ¨¡å—

1. åœ¨ `python/` ç›¸åº”ç›®å½•ä¸‹åˆ›å»ºæ¨¡å—
2. åœ¨ `python/requirements.txt` æ·»åŠ ä¾èµ–
3. åœ¨ `python/common/` ä¸­æ·»åŠ å…¬å…±åŠŸèƒ½

## ğŸ› æ•…éšœæ’æŸ¥

### æ•°æ®åº“è¿æ¥å¤±è´¥

1. æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„æ•°æ®åº“é…ç½®
2. ç¡®è®¤æ•°æ®åº“æœåŠ¡å·²å¯åŠ¨
3. æ£€æŸ¥é˜²ç«å¢™å’Œå®‰å…¨ç»„è§„åˆ™

```bash
# æµ‹è¯•æ•°æ®åº“è¿æ¥
python3 -m python.common.database
```

### Tushare APIè°ƒç”¨å¤±è´¥

1. æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤APIç§¯åˆ†å……è¶³
3. æ£€æŸ¥ç½‘ç»œè¿æ¥

### å‰ç«¯æ— æ³•è®¿é—®API

1. æ£€æŸ¥Node.jsæœåŠ¡æ˜¯å¦å¯åŠ¨
2. æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

## ğŸ“Š æ•°æ®è¯´æ˜

### æ•°æ®æº

- **Tushare Pro**: æä¾›Aè‚¡å¸‚åœºæ•°æ®
  - å¤‡ç”¨è¡Œæƒ…æ•°æ®ï¼ˆbak_dailyï¼‰ï¼š37ä¸ªå­—æ®µ
  - æŠ€æœ¯é¢å› å­ï¼ˆstk_factor_proï¼‰ï¼š200+ä¸ªæŠ€æœ¯æŒ‡æ ‡

### æ•°æ®æ›´æ–°

- **é¢‘ç‡**: æ¯ä¸ªäº¤æ˜“æ—¥17:30è‡ªåŠ¨æ›´æ–°
- **èŒƒå›´**: å…¨å¸‚åœº5000+åªè‚¡ç¥¨
- **ä¿ç•™**: 90å¤©å†å²æ•°æ®

### æ ‡ç­¾ç³»ç»Ÿ

- **P0æ ¸å¿ƒæ ‡ç­¾**: 6ä¸ªï¼ˆå·²å®ç°ï¼‰
- **P1é‡è¦æ ‡ç­¾**: 9ä¸ªï¼ˆå¾…å®ç°ï¼‰
- **P2å¤æ‚æ ‡ç­¾**: 2ä¸ªï¼ˆå¾…å®ç°ï¼‰

## ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

1. **ä¸è¦æäº¤ `.env` æ–‡ä»¶åˆ°Git**
2. **å®šæœŸæ›´æ¢æ•°æ®åº“å¯†ç å’ŒAPIå¯†é’¥**
3. **ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿä¿¡æ¯**
4. **é™åˆ¶æ•°æ®åº“ç”¨æˆ·æƒé™**
5. **å¯ç”¨é˜²ç«å¢™å’Œå®‰å…¨ç»„è§„åˆ™**

## ğŸ“ è®¸å¯è¯

Copyright Â© 2024 TTSS Team. All rights reserved.

## ğŸ“ è”ç³»æ–¹å¼

- é‚®ç®±: bestismark@126.com
- GitHub: https://github.com/immarkfu/ttssreport

## ğŸ™ è‡´è°¢

- [Tushare](https://tushare.pro/) - æ•°æ®æº
- [Manus](https://manus.im/) - AIå¼€å‘åŠ©æ‰‹
- [Shadcn UI](https://ui.shadcn.com/) - UIç»„ä»¶åº“

---

**æœ€åæ›´æ–°**: 2024-01-20
